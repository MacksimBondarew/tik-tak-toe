(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860,999],{8926:(e,t,a)=>{Promise.resolve().then(a.bind(a,6666))},6666:(e,t,a)=>{"use strict";a.d(t,{GameClient:()=>p});var r=a(5155),s=a(9057),n=a(778);function i(e){let{status:t,field:a,actions:i,players:l}=e;return(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"max-w-xl w-full mx-auto",children:(0,r.jsxs)(s.Zp,{className:"backdrop-blur-md border border-gray-800 shadow-md rounded-lg",children:[(0,r.jsxs)(s.Wu,{className:"flex flex-col gap-4",children:[l,t,(0,r.jsx)("div",{className:"flex items-center justify-center p-6",children:a})]}),(0,r.jsx)(s.wL,{className:"flex justify-center",children:i})]})})}function l(e){let{game:t}=e;if(!t)return(0,r.jsx)("div",{className:"text-gray-400 text-center text-lg",children:"Loading players..."});let a="idle"===t.status?t.creator:t.players[0],s="idle"===t.status?null:t.players[1];return(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"flex flex-col items-center py-6 backdrop-blur-md border border-gray-800 shadow-md rounded-lg",children:[(0,r.jsxs)(n.P.div,{whileHover:{scale:1.05},transition:{duration:.3},className:"flex flex-col items-center mb-4 gap-1",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-red-400",children:["❌ ",a.login]}),(0,r.jsxs)("span",{className:"text-sm text-gray-400",children:["Rating: ",a.rating]})]}),(0,r.jsx)("div",{className:"w-full border-t border-gray-600 mb-4"}),s?(0,r.jsxs)(n.P.div,{whileHover:{scale:1.05},transition:{duration:.3},className:"flex flex-col items-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-400",children:["⭕ ",s.login]}),(0,r.jsxs)("span",{className:"text-sm text-gray-400",children:["Rating: ",s.rating]})]}):(0,r.jsx)(n.P.div,{initial:{opacity:.5},animate:{opacity:1},transition:{duration:1,repeat:1/0,repeatType:"reverse"},className:"text-gray-400 text-lg",children:"⏳ Waiting for player..."})]})}let d={X:"X",O:"O"},c=e=>e.field.filter(e=>null!==e).length%2==0?d.X:d.O;function o(e){let{game:t}=e,a=null;return t?(("inProgress"===t.status||"gameOver"===t.status)&&(a=c(t)),(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"flex flex-col items-center text-center text-xl font-semibold rounded-lg",children:["idle"===t.status&&(0,r.jsxs)(n.P.div,{initial:{opacity:.6},animate:{opacity:1},transition:{duration:1.2,repeat:1/0,repeatType:"reverse"},className:"flex flex-col items-center text-gray-300 text-lg font-medium",children:["Searching for an opponent...",(0,r.jsx)("br",{}),"Invite a friend or wait for a challenger!"]}),"inProgress"===t.status&&(0,r.jsxs)(n.P.span,{className:"text-3xl font-bold",animate:{textShadow:"0px 0px 10px rgba(255, 255, 255, 0.5)"},children:["Current Turn: ","X"===a?"❌":"⭕"]}),"gameOver"===t.status&&(0,r.jsxs)(n.P.span,{className:"text-3xl font-bold text-green-400",animate:{scale:[1,1.1,1]},transition:{duration:.8,repeat:1/0,repeatType:"reverse"},children:["\uD83C\uDF89 Winner: ","O"===a?"❌":"⭕"]}),"gameOverDraw"===t.status&&(0,r.jsx)(n.P.span,{className:"text-3xl font-bold text-yellow-400",animate:{scale:[1,1.05,1]},transition:{duration:.8,repeat:1/0,repeatType:"reverse"},children:"\uD83E\uDD1D Draw! No winner."})]},t.status)):(0,r.jsx)("div",{className:"text-gray-400 text-center text-lg",children:"Loading game..."})}function x(e){let{game:t,onCellClick:a}=e;return t?(0,r.jsx)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"grid grid-cols-3 gap-1 backdrop-blur-md border border-gray-800 p-3 rounded-lg relative",children:t.field.map((e,t)=>(0,r.jsx)(n.P.button,{onClick:()=>a(t),whileTap:{scale:.9},className:"w-16 h-16 flex justify-center items-center border border-gray-600 bg-gray-900 text-2xl font-bold text-white transition-all duration-300 hover:bg-gray-700",children:"X"===e?(0,r.jsx)(n.P.span,{className:"text-red-400",animate:{scale:[1,1.2,1]},transition:{duration:.5},children:"❌"}):"O"===e?(0,r.jsx)(n.P.span,{className:"text-blue-400",animate:{scale:[1,1.2,1]},transition:{duration:.5},children:"⭕"}):""},t))}):(0,r.jsx)("div",{className:"text-gray-400 text-center text-lg",children:"Loading game..."})}var m=a(9838),u=a(2115),f=a(5828);let g=(0,f.createServerReference)("7f8891ab2f04546eb02c6f73886a45db75960b1649",f.callServer,void 0,f.findSourceMapURL,"gameStepAction");function p(e){let{defaultGame:t}=e,{game:a=t,step:s}=function(e){let{isPending:t,dataStream:a}=function(e){let[t,a]=(0,u.useState)(!0),[r,s]=(0,u.useState)(),[n,i]=(0,u.useState)();return(0,u.useEffect)(()=>{let t=new EventSource(e);return t.addEventListener("message",e=>{try{a(!1),i(void 0),s(JSON.parse(e.data))}catch(e){i(e)}}),t.addEventListener("error",e=>{i(e)}),()=>t.close()},[e]),{dataStream:r,error:n,isPending:t}}(m.J.gameStream(e)),[r,s]=(0,u.useTransition)();return{game:a,step:t=>{s(async()=>{await g({gameId:e,index:t})})},isPending:t,isStepPending:r}}(t.id);return(0,r.jsx)(i,{players:(0,r.jsx)(l,{game:a}),status:(0,r.jsx)(o,{game:a}),field:(0,r.jsx)(x,{game:a,onCellClick:s})})}},9838:(e,t,a)=>{"use strict";a.d(t,{J:()=>r});let r={signIn:()=>"/sign-in",signUp:()=>"/sign-up",game:e=>"/game/".concat(e),gameStream:e=>"/game/".concat(e,"/stream"),gamesStream:()=>"/games/stream"}},5407:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(3463),s=a(9795);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},9057:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>d,Zp:()=>i,aR:()=>l,wL:()=>c});var r=a(5155),s=a(2115),n=a(5407);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5",a),...s})});l.displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("",a),...s})});d.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center",a),...s})});c.displayName="CardFooter"}},e=>{var t=t=>e(e.s=t);e.O(0,[824,778,441,517,358],()=>t(8926)),_N_E=e.O()}]);