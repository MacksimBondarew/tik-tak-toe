exports.id=763,exports.ids=[763],exports.modules={12464:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"60be4280f106133512508fe1cde8ded90852bd4a28":()=>m,"60df6cf0d62414f406d5607f0a4b24d226b2fe2d3a":()=>c});var a=r(21590);r(70376);var i=r(63954),s=r(71010),n=r(99184),o=r(16500),l=r(99344);let d=o.z.object({login:o.z.string().email(),password:o.z.string().min(3)});async function c(e,t){let r=t.get("email"),a=t.get("password"),o=d.safeParse({login:r,password:a});if(!o.success)return(0,s.kb)("error-form-data");let l=await (0,i.FH)(o.data);return"right"===l.type&&(await i.mB.addSession(l.value),(0,n.redirect)("/")),(0,s.kb)("login-or-password-incorrect")}(0,l.D)([c]),(0,a.A)(c,"60df6cf0d62414f406d5607f0a4b24d226b2fe2d3a",null);let u=o.z.object({login:o.z.string().email(),password:o.z.string().min(3)});async function m(e,t){let r=t.get("email"),a=t.get("password"),o=u.safeParse({login:r,password:a});if(!o.success)return(0,s.kb)("error-form-data");let l=await (0,i.kg)(o.data);return"right"===l.type&&(await i.mB.addSession(l.value),(0,n.redirect)("/")),(0,s.kb)("login-allready-taken")}(0,l.D)([m]),(0,a.A)(m,"60be4280f106133512508fe1cde8ded90852bd4a28",null)},45527:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},73551:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},94419:()=>{},54667:()=>{},50511:(e,t,r)=>{Promise.resolve().then(r.bind(r,42264)),Promise.resolve().then(r.bind(r,59702))},10343:(e,t,r)=>{Promise.resolve().then(r.bind(r,30630)),Promise.resolve().then(r.bind(r,94722))},96487:()=>{},78335:()=>{},30630:(e,t,r)=>{"use strict";r.d(t,{SignInForm:()=>p});var a=r(45512),i=r(72004),s=r(92433),n=r(7123),o=r(51216),l=r(26248);let d=(0,l.createServerReference)("60df6cf0d62414f406d5607f0a4b24d226b2fe2d3a",l.callServer,void 0,l.findSourceMapURL,"signInAction");var c=r(44209),u=r(23236),m=r(64249),f=r(62726);function p(){let[e,t,r]=(0,m.F)(d,(0,c.pG)(void 0)),l=(0,c.qE)(e,e=>({"login-or-password-incorrect":"login or password incorrect","invalid-form-data":"Please enter only string values","error-form-data":"Invalid form data. Please check your input.\nOnly string values are allowed"})[e]||"An unknown error occurred. Please try again.");return(0,a.jsx)(i.B,{title:"Sign in",action:t,fields:(0,a.jsx)(s.E,{}),error:(0,a.jsx)(u.K,{error:l}),actions:(0,a.jsx)(n.b,{isPending:r,children:"Sign in"}),link:(0,a.jsx)(o.O,{linkText:"Sign up",text:"Don't have an account?",url:f.J.signUp()})})}},94722:(e,t,r)=>{"use strict";r.d(t,{SignUpForm:()=>p});var a=r(45512),i=r(72004),s=r(92433),n=r(7123),o=r(51216),l=r(26248);let d=(0,l.createServerReference)("60be4280f106133512508fe1cde8ded90852bd4a28",l.callServer,void 0,l.findSourceMapURL,"signUpAction");var c=r(64249),u=r(44209),m=r(23236),f=r(62726);function p(){let[e,t,r]=(0,c.F)(d,(0,u.pG)(void 0)),l=(0,u.qE)(e,e=>({"login-allready-taken":"User is already existing","invalid-form-data":"Please enter only string values","error-form-data":"Invalid form data. Please check your input.\nOnly string values are allowed"})[e]||"An unknown error occurred. Please try again.");return(0,a.jsx)(i.B,{title:"Sign up",action:t,fields:(0,a.jsx)(s.E,{}),actions:(0,a.jsx)(n.b,{isPending:r,children:"Sign up"}),error:(0,a.jsx)(m.K,{error:l}),link:(0,a.jsx)(o.O,{linkText:"Sign in",text:"Already have an account?",url:f.J.signIn()})})}},72004:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var a=r(45512),i=r(30681),s=r(96294);function n({title:e,fields:t,actions:r,link:n,action:o,error:l}){return(0,a.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"flex items-center justify-center w-full",children:(0,a.jsxs)(i.Zp,{className:"w-full py-5 max-w-sm border border-gray-800 shadow-md rounded-lg relative overflow-hidden transition-all duration-300 hover:shadow-lg",children:[(0,a.jsx)(i.aR,{className:"relative text-center pb-4",children:(0,a.jsx)(s.P.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},whileHover:{textShadow:"0px 0px 12px rgba(255, 255, 255, 0.3)",scale:1.02},className:"text-3xl font-semibold text-gray-200 tracking-wide transition-all duration-300",children:e})}),(0,a.jsxs)("form",{action:o,className:"relative",children:[(0,a.jsxs)(i.Wu,{className:"space-y-6 px-6",children:[t,l,r]}),(0,a.jsx)(i.wL,{className:"flex flex-col space-y-4 px-6 pb-6",children:n})]})]})})}},51216:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var a=r(45512),i=r(28531),s=r.n(i),n=r(96294);function o({text:e,linkText:t,url:r}){return(0,a.jsxs)("div",{className:"text-sm text-gray-400 text-center",children:[(0,a.jsxs)("span",{children:[e," "]}),(0,a.jsx)(n.P.span,{whileHover:{scale:1.05,textShadow:"0px 0px 10px rgba(255, 255, 255, 0.6)"},transition:{duration:.25},className:"inline-block relative",children:(0,a.jsxs)(s(),{href:r,className:"relative text-primary font-medium transition-all duration-300",children:[t,(0,a.jsx)(n.P.span,{className:"absolute left-1/2 bottom-0 w-0 h-[2px] bg-primary origin-center",whileHover:{width:"100%",left:0},transition:{duration:.3,ease:"easeOut"}})]})})]})}},23236:(e,t,r)=>{"use strict";r.d(t,{K:()=>m});var a=r(45512),i=r(44209),s=r(96294),n=r(58009),o=r(21643),l=r(549);let d=(0,o.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=n.forwardRef(({className:e,variant:t,...r},i)=>(0,a.jsx)("div",{ref:i,role:"alert",className:(0,l.cn)(d({variant:t}),e),...r}));c.displayName="Alert",n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let u=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));function m({error:e}){return e?(0,i.pB)(e,{right:()=>null,left:e=>(0,a.jsx)(s.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.4,ease:"easeInOut"},className:"w-full flex justify-center",children:(0,a.jsx)(c,{variant:"destructive",className:"relative flex items-center justify-between p-4 border border-red-500 bg-red-900/20 text-red-400 rounded-lg shadow-md backdrop-blur-md",children:(0,a.jsx)(u,{className:"text-sm font-medium",children:"string"==typeof e?e:"An error occurred"})})})}):null}u.displayName="AlertDescription"},92433:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var a=r(45512),i=r(96294),s=r(58009),n=r(549);let o=s.forwardRef(({className:e,type:t,...r},i)=>(0,a.jsx)("input",{type:t,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));o.displayName="Input";var l=r(5267);function d(){let e=(0,s.useId)(),t=(0,s.useId)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.23,1,.32,1]},className:"space-y-2 relative",children:[(0,a.jsx)(l.J,{htmlFor:e,className:"text-gray-300",children:"Email"}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)(o,{id:e,name:"email",type:"email",placeholder:"m@example.com",required:!0,autoComplete:"email",className:"w-full bg-black text-white border border-gray-700 rounded-md px-3 py-2 transition-all duration-300 ease-in-out focus:ring-2 focus:ring-violet-500 focus:border-violet-500"}),(0,a.jsx)(i.P.div,{className:"absolute inset-0 border-2 border-transparent rounded-md pointer-events-none",animate:{borderColor:["transparent","rgba(139, 92, 246, 0.7)","transparent"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}})]})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.23,1,.32,1],delay:.2},className:"space-y-2 relative",children:[(0,a.jsx)(l.J,{htmlFor:t,className:"text-gray-300",children:"Password"}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)(o,{id:t,name:"password",type:"password",required:!0,autoComplete:"new-password",className:"w-full bg-black text-white border border-gray-700 rounded-md px-3 py-2 transition-all duration-300 ease-in-out focus:ring-2 focus:ring-violet-500 focus:border-violet-500"}),(0,a.jsx)(i.P.div,{className:"absolute inset-0 border-2 border-transparent rounded-md pointer-events-none",animate:{borderColor:["transparent","rgba(139, 92, 246, 0.7)","transparent"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}})]})]})]})}},7123:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var a=r(45512),i=r(96294),s=r(6648),n=r(38239),o=r(58009);function l({children:e,isPending:t}){let[r,l]=(0,o.useState)(!1);return(0,a.jsx)(i.P.div,{className:"relative w-full h-[50px] min-h-[50px] flex items-center justify-center",children:(0,a.jsxs)(i.P.div,{layout:!0,whileHover:t?{}:{scale:1.02},whileTap:t?{}:{scale:.98},transition:{duration:.2},className:"relative w-full",children:[(0,a.jsx)(i.P.div,{className:"absolute top-0 left-0 w-full h-full rounded-md bg-gradient-to-r opacity-30",animate:{opacity:r?.6:.3,scale:r?1.05:1},transition:{duration:.3}}),(0,a.jsx)(n.$,{className:"relative overflow-hidden w-full h-10 px-6 py-3 font-bold text-white bg-gradient-to-r from-black to-gray-900 border border-gray-700 shadow-md rounded-md transition-all duration-300 ease-in-out flex items-center justify-center",onMouseDown:()=>l(!0),onMouseUp:()=>l(!1),onMouseLeave:()=>l(!1),children:(0,a.jsx)(s.N,{mode:"wait",children:t?(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"flex items-center",children:[(0,a.jsx)(i.P.div,{animate:{rotate:360},transition:{repeat:Number.POSITIVE_INFINITY,duration:.8,ease:"linear"},className:"mr-2 h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),"Processing..."]},"loading"):(0,a.jsx)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:e},"button-text")})})]})})}},62726:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});let a={signIn:()=>"/sign-in",signUp:()=>"/sign-up",game:e=>`/game/${e}`,gameStream:e=>`/game/${e}/stream`,gamesStream:()=>"/games/stream"}},549:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(82281),i=r(94805);function s(...e){return(0,i.QP)((0,a.$)(e))}},44209:(e,t,r)=>{"use strict";r.d(t,{pB:()=>n,pG:()=>i,qE:()=>s});let a=e=>({error:e,type:"left"}),i=e=>({type:"right",value:e}),s=(e,t)=>"left"===e.type?a(t(e.error)):e,n=(e,t)=>"left"===e.type?t.left(e.error):t.right(e.value)},64249:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var a=r(58009);function i(e,t,r){return(0,a.useActionState)(e,t,r)}},38239:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(45512),i=r(58009),s=r(89383),n=r(21643),o=r(549),l=r(44209);let d=(0,n.F)("relative inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,error:n,children:c,...u},m)=>{let f=i?s.DX:"button";return(0,a.jsxs)(f,{className:(0,o.cn)(d({variant:t,size:r,className:e})),ref:m,...u,children:[c,n&&(0,l.pB)(n,{right:()=>null,left:e=>(0,a.jsx)("div",{className:"absolute left-[-50px] top-[calc(100%_+_4px)] text-primary",children:e})})]})});c.displayName="Button"},30681:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>l,Zp:()=>n,aR:()=>o,wL:()=>d});var a=r(45512),i=r(58009),s=r(549);let n=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let o=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5",e),...t}));o.displayName="CardHeader",i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let l=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("",e),...t}));l.displayName="CardContent";let d=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center",e),...t}));d.displayName="CardFooter"},56730:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>i});var a=r(62740);let i={title:"Authecation"};function s({children:e}){return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center w-full p-4",children:e})}},71354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>l});var a=r(62740),i=r(22376),s=r.n(i),n=r(68726),o=r.n(n);r(61135);let l={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{className:`${s().variable} ${o().variable} antialiased dark flex flex-col min-h-screen`,children:e})})}},63954:(e,t,r)=>{"use strict";r.d(t,{kg:()=>m,HW:()=>S,mB:()=>N,FH:()=>j});var a=r(71010),i=r(62211);let s={saveUser:function(e){return i.z.user.upsert({where:{id:e.id},create:e,update:e})},getUser:function(e){return i.z.user.findFirst({where:e})}};var n=r(21721),o=r.n(n);let l=(e,t)=>({id:e.id,login:e.login,expiredAt:t});var d=r(77598);async function c(e,t=(0,d.randomBytes)(16).toString("hex")){return{hash:(await new Promise((r,a)=>(0,d.pbkdf2)(e,t,1e3,64,"sha512",(e,t)=>e?a(e):r(t)))).toString("hex"),salt:t}}let u={comparePasswords:async function({hash:e,password:t,salt:r}){return e===(await c(t,r)).hash},hashPassword:c},m=async({login:e,password:t})=>{if(await s.getUser({login:e}))return(0,a.kb)("user-login-exists");let{hash:r,salt:i}=await u.hashPassword(t),n=await s.saveUser({id:o()(),login:e,rating:1e3,passwordHash:r,salt:i});return(0,a.pG)(n)};var f=r(83814),p=r(83160),v=r(99184),g=r(42385);let x=process.env.SESSION_SECRET,h=new TextEncoder().encode(x);async function b(e){return new f.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7d").sign(h)}async function y(e=""){try{let{payload:t}=await (0,p.V)(e,h,{algorithms:["HS256"]});return(0,a.pG)(t)}catch(e){return(0,a.kb)(e)}}let w=()=>(0,g.UL)().then(e=>e.get("session")?.value),N={addSession:async function(e){if(!process.env.SESSION_SECRET)throw Error("SESSION_SECRET is not defined in .env");let t=new Date(Date.now()+6048e5),r=l(e,t.toISOString()),a=await b(r);(await (0,g.UL)()).set("session",a,{httpOnly:!0,secure:!0,expires:t,sameSite:"lax",path:"/"})},deleteSession:async function(){(await (0,g.UL)()).delete("session")},verifySession:async(e=w)=>{let t=await e(),r=await y(t);return"left"===r.type&&(0,v.redirect)("/sign-in"),{isAuth:!0,session:r.value}}};async function j({login:e,password:t}){let r=await s.getUser({login:e});return r&&await u.comparePasswords({hash:r.passwordHash,salt:r.salt,password:t})?(0,a.pG)(r):(0,a.kb)("login-or-password-incorrect")}let S=async()=>{let{session:e}=await N.verifySession();return s.getUser({id:e.id})}},42264:(e,t,r)=>{"use strict";r.d(t,{SignInForm:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call SignInForm() from the server but SignInForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\mb200\\OneDrive\\Документы\\GitHub\\mini-game\\src\\features\\auth\\containers\\sing-in-form.tsx","SignInForm")},59702:(e,t,r)=>{"use strict";r.d(t,{SignUpForm:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call SignUpForm() from the server but SignUpForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\mb200\\OneDrive\\Документы\\GitHub\\mini-game\\src\\features\\auth\\containers\\sing-up-form.tsx","SignUpForm")},24603:(e,t,r)=>{"use strict";r.d(t,{X:()=>i.SignUpForm,b:()=>a.SignInForm});var a=r(42264),i=r(59702)},62211:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var a=r(96330);let i=globalThis.prismaGlobal??new a.PrismaClient},71010:(e,t,r)=>{"use strict";r.d(t,{kb:()=>a,pG:()=>i});let a=e=>({error:e,type:"left"}),i=e=>({type:"right",value:e})},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(88077);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},61135:()=>{}};